<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Legend Token Platform</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <link rel="mainheet" href="main.css">
</head>
<body>
  <!-- بخش معرفی توکن -->
  <section id="token-info">
    <h1>Legend Token (LGD)</h1>
    <p>Total Supply: 990,000,000 LGD</p>
    <p>Contract: <code>0x4751C0DE56EFB3770615097347cbF131D302498A</code></p>
    <img src="logo.png" alt="Legend Token Logo" width="100" />
  </section>

  <!-- اتصال کیف پول -->
  <section id="wallet-connect">
    <button onclick="connectWallet()">Connect Wallet</button>
    <p id="wallet-address"></p>
  </section>

  <!-- خرید و فروش توکن -->
  <section id="token-swap">
    <h2>Buy / Sell LGD Token</h2>
    <iframe src="https://pancakeswap.finance/swap?outputCurrency=0x4751C0DE56EFB3770615097347cbF131D302498A" width="100%" height="400" style="border:none;"></iframe>
  </section>

  <!-- بخش شرط بندی -->
  <section id="bet-section">
    <h2>Prediction Market</h2>
    <p>Choose a token and predict whether its price will go UP or DOWN in the next 5 minutes</p>

    <form id="bet-form">
      <label>Choose Token:</label>
      <select name="token">
        <option value="BTCUSDT">Bitcoin (BTC)</option>
        <option value="ETHUSDT">Ethereum (ETH)</option>
        <option value="BNBUSDT">Binance Coin (BNB)</option>
        <option value="LGD">Legend Token (LGD)</option>
      </select>

      <label>Select Multiplier:</label>
      <select name="multiplier">
        <option value="1">x1 - Min: 10,000 LGD</option>
        <option value="2">x2 - Min: 15,000 LGD</option>
        <option value="3">x3 - Min: 20,000 LGD</option>
        <option value="4">x4 - Min: 25,000 LGD</option>
        <option value="5">x5 - Min: 30,000 LGD</option>
      </select>

      <label>Direction:</label>
      <select name="direction">
        <option value="up">Up</option>
        <option value="down">Down</option>
      </select>

      <button type="submit">Place Bet</button>
    </form>

    <!-- نمایش نمودار کندل -->
    <div id="chart">
      <h3>Live Chart</h3>
      <div id="tradingview-widget-container" style="height: 400px;"></div>
    </div>
  </section>

  <!-- رتبه بندی -->
  <section id="leaderboard">
    <h2>Top 10 Users</h2>
    <ul id="leaderboard-list">
      <li>Loading leaderboard...</li>
    </ul>
    <p id="countdown">Event ends in: 3 days</p>
  </section>

  <!-- پنل مدیریت (فقط برای مالک) -->
  <section id="admin-panel" style="display:none;">
    <h2>Admin Panel</h2>
    <p>Total collected LGD: <span id="admin-balance">0</span></p>
    <button onclick="withdraw()">Withdraw Earnings</button>
  </section>

  <script src="main.js"></script>

  <!-- TradingView Widget Script -->
  <script type="text/javascript">
    function loadChart(symbol = 'BTCUSDT') {
      document.getElementById('tradingview-widget-container').innerHTML = '';
      new TradingView.widget({
        "width": "100%",
        "height": 400,
        "symbol": "BINANCE:" + symbol,
        "interval": "1",
        "timezone": "Etc/UTC",
        "theme": "light",
        "style": "1",
        "locale": "en",
        "toolbar_bg": "#f1f3f6",
        "enable_publishing": false,
        "container_id": "tradingview-widget-container"
      });
    }

    // بارگذاری اولیه نمودار
    loadChart();
    document.querySelector('[name="token"]').addEventListener('change', (e) => {
      const selected = e.target.value;
      loadChart(selected === 'LGD' ? 'BTCUSDT' : selected); // برای LGD پیش‌فرض
    });
  </script>

  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
</body>
</html>
